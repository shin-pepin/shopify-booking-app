# Cart Validation API - 入力クエリ
# カート内の商品とLine Item Propertiesを取得

query RunInput {
  cart {
    lines {
      id
      quantity
      merchandise {
        ... on ProductVariant {
          id
          product {
            id
            title
          }
        }
      }
      # Line Item Properties（予約情報）を取得
      # _BookingStart, _BookingEnd, _ResourceId, _LocationId など
      attribute(key: "_BookingStart") {
        key
        value
      }
    }
  }
  # 現在時刻の参照用（Shopify Functionsでは直接取得できないため、
  # 実際にはカート属性やメタフィールドで渡すか、
  # 予約日時のパースで対応）
}

